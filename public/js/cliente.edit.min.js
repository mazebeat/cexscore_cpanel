function adjustIframeHeight(){var a=$("body");var b=a.data("iframe.fv");if(b){b.height(a.height())}}function validateTab(b){var a=$("#createClientForm");var d=a.data("formValidation");var c=a.find(".tab-pane").eq(b);d.validateContainer(c);var e=d.isValidContainer(c);if(e===false||e===null){return false}return true}(function(b){b("#datemask").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/yyyy"});b("#datemask2").inputmask("mm/dd/yyyy",{placeholder:"mm/dd/yyyy"});b("#rut_cliente").rut({formatOn:"keyup",validateOn:"change"});b('input[type="checkbox"], input[type="radio"]').iCheck({tap:true,checkboxClass:"icheckbox_square-orange",radioClass:"iradio_square-orange",increaseArea:"20%"}).on("ifChanged",function(d){d.preventDefault();var c=b(this).attr("name");b("#createClientForm").formValidation("revalidateField",c)}).end();b("#myTabs a").click(function(c){c.preventDefault();b(this).tab("show")});var a={"cliente[rut_cliente]":{message:"El RUT no es valido",validators:{notEmpty:{},callback:{callback:function(d,c){return b.validateRut(d)},message:"El campo RUT es incorrecto"},stringLength:{min:8,max:12,}}},"cliente[fono_cliente]":{validators:{notEmpty:{},regexp:{message:"El número de teléfono solo puede contener dígitos, espacios, -, (, ), + y .",regexp:/^[0-9\s\-()+\.]+$/}}},"usuario[rut_usuario]":{message:"El RUT no es valido",validators:{notEmpty:{},callback:{callback:function(d,c){return b.validateRut(d)},message:"El campo RUT es incorrecto"},stringLength:{min:8,max:12}}}};b("#createClientForm").find("#fieldPais").change(function(e){var d=b("#fieldRegion");var f=b("#fieldCiudad");d.empty().formValidation("revalidateField","cliente[region").show();f.empty().formValidation("revalidateField","cliente[id_ciudad");var c=b(this).find("option:selected").text();if(c=="Chile"||c=="chile"||c=="CHILE"){b(".fieldRegion").show();b(".fieldCiudad").show();d.removeAttr("disabled","disabled");f.removeAttr("disabled","disabled")}else{b(".fieldRegion").hide();b(".fieldCiudad").hide();d.attr("disabled","disabled");f.attr("disabled","disabled")}b.get("/admin/find/locate",{filterBy:"pais",option:b(this).val()},function(h){if(Object.keys(h).length>0){d.append(b("<option value=''></option>"));b.each(h,function(i,j){d.append(b("<option value='"+i+"'>"+j+"</option>"))})}});var g=b(this).attr("name");b("#createClientForm").formValidation("revalidateField",g);e.preventDefault()}).end().find("#fieldRegion").change(function(d){var c=b("#fieldCiudad");c.attr("disabled","disabled").empty().formValidation("revalidateField",c.attr("name")).show();b.get("/admin/find/locate",{filterBy:"region",option:b(this).val()},function(e){if(Object.keys(e).length>0){c.append(b("<option value=''></option>"));b.each(e,function(g,h){c.append(b("<option value='"+g+"'>"+h+"</option>"))})}c.removeAttr("disabled","disabled")});var f=b(this).attr("name");b("#createClientForm").formValidation("revalidateField",f);d.preventDefault()}).end().find('[name="cliente[id_plan]"]').on("ifChecked",function(d){var c=b(this);b("#cant_moment_plan").val(0).removeAttr("disabled");b(".cloneMoment").remove();b.get("/admin/find/configplan",{idplan:c.val()},function(e){var f=parseInt(e);if(f==0||f=="undefined"){f=999}var g=b("#cant_moment_plan").attr("name").attr("max",f).attr("data-fv-lessthan-value",f).end();b("#createClientForm").formValidation("removeField","cant_moment_plan").formValidation("addField","cant_moment_plan").formValidation("revalidateField",g)});d.preventDefault()}).end().formValidation({framework:"bootstrap",excluded:[":disabled"],live:"enabled",locale:"es_CL",button:{selector:'[type="submit"]',disabled:"disabled"},fields:a}).on("err.field.fv",function(g,f){var d=f.element.parents(".tab-pane");var c=d.attr("id");b('a[href="#'+c+'"][data-toggle="tab"]').parent().addClass("error").find("i").removeClass("fa-check").addClass("fa-times");if(f.field=="cant_moment_plan"){b("#addMoments").attr("disabled","disabled")}}).on("success.field.fv",function(i,h){var d=h.element.parents(".tab-pane");var g=d.attr("id");var f=b('a[href="#'+g+'"][data-toggle="tab"]').parent().find("i").removeClass("fa-check fa-times").end();var c=h.fv.isValidContainer(d);if(c!==null){f.addClass(c?"fa-check":"fa-times")}if(h.field=="cant_moment_plan"){b("#addMoments").removeAttr("disabled")}if(h.fv.getInvalidFields().length>0){h.fv.disableSubmitButtons(true)}}).on("success.form.fv",function(c){})})(jQuery);