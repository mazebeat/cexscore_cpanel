(function(c){function d(){var e=c("body");var f=e.data("iframe.fv");if(f){f.height(e.height())}}function a(f){var e=c("#createClientForm");var h=e.data("formValidation");var g=e.find(".tab-pane").eq(f);h.validateContainer(g);var i=h.isValidContainer(g);if(i===false||i===null){return false}return true}function b(){var e=c("#fieldCiudad");if(e.val()==null||e.val()==undefined||e.find("option:selected").text()==""){e.hide().parents(".form-group").hide()}e=c("#fieldRegion");if(e.val()==null||e.val()==undefined||e.find("option:selected").text()==""){e.hide().parents(".form-group").hide()}}c("#myTabs a").click(function(f){f.preventDefault();var g=c(this);g.tab("show")});c("#home").load(c(".active a").attr("data-url"),function(e){c(".active a").tab("show")});c("#id_sector").on("change",function(f){f.preventDefault();c.get("/admin/find/survey",{id_sector:c(this).val()},function(e){c('[name="id_encuesta"]').val(e.id)})});c("#addMoments").click(function(l){var m=parseInt(c("#cant_moment_plan").val(),10);var g=c("#form-moments").children(".form-group.momento").last().data("id");var j=g+1;var h=parseInt(j+1);c(".cloneMoment").remove();var f=c("#optionTemplate");var i=f.clone().removeClass("hide").addClass("momento").attr("data-id",j).removeAttr("id").find(".control-label").text("Momento "+h+":").attr("for","momentos["+j+"][id_momento]").end().insertAfter(c("#form-moments").children(".form-group.momento").last()).end();var k=i.find('input[name="descripcion_momento"]');i.find('[name="descripcion_momento"]').attr("name","momentos["+j+"][descripcion_momento]").end().find('[name="id_momento"]').attr("name","momentos["+j+"][id_momento]").val(h).end().find('[name="id_encuesta"]').attr("name","momentos["+j+"][id_encuesta]").end();c("#form-moments").children(".form-group.momento").last().find("div:nth-child(3)").append("<a href='javascript:void(0);' class='deleteOptionTemplate btn btn-default pull-right' data-moment='"+j+"'><i class='fa fa-trash-o'></i></a>").end();c("#createClientForm").formValidation("addField",k);l.preventDefault()});c("[data-delete]").click(function(l){l.preventDefault();var m=c(this);if(confirm("Est√° seguro de eliminar este momento ?")){var g=m.prop("href");var h=m.data("delete");var o=m.data("moment");var k=m.data("accion");var p=c("<form/>",{action:g,method:"post"});var f=c("<input/>",{type:"hidden",name:"_method",value:"delete"});var j=c("<input/>",{type:"hidden",name:"_token",value:h});var n=c("<input/>",{type:"hidden",name:"id_momento",value:o});var i=c("<input/>",{type:"hidden",name:"accion",value:k});p.append(f,j,n,i).hide().appendTo("body").submit()}});c("body").on("click",".deleteOptionTemplate",function(f){f.preventDefault();c(this).parents(".form-group").remove()});c("#fieldPais").change(function(f){var e=c("#fieldRegion");var g=c("#fieldCiudad");e.empty();g.empty();if(c(this).find("option:selected").text().toLowerCase()=="chile"){c(".fieldRegion").show();c(".fieldCiudad").show();e.removeAttr("disabled","disabled");g.removeAttr("disabled","disabled")}else{c(".fieldRegion").hide();c(".fieldCiudad").hide();e.attr("disabled","disabled").children().removeAttr("selected");g.attr("disabled","disabled").children().removeAttr("selected")}c.get("/admin/find/locate",{filterBy:"pais",option:c(this).val()},function(h){if(Object.keys(h).length>0){e.empty().append(c("<option value=''></option>"));c.each(h,function(i,j){e.append(c("<option value='"+i+"'>"+j+"</option>"))})}});f.preventDefault()});c("#fieldRegion").change(function(g){var f=c("#fieldCiudad");f.attr("disabled","disabled").empty().show();c.get("/admin/find/locate",{filterBy:"region",option:c(this).val()},function(e){console.log(e);if(Object.keys(e).length>0){f.empty().append(c("<option value=''></option>"));c.each(e,function(h,i){f.append(c("<option value='"+h+"'>"+i+"</option>"))})}f.removeAttr("disabled","disabled")});g.preventDefault()})})(jQuery);